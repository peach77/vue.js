(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{125:function(e,t,a){e.exports=a(225)},130:function(e,t,a){},131:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){},223:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(13),l=a.n(o),r=(a(130),a(15)),i=a(16),s=a(18),u=a(17),p=a(19),m=(a(131),a(11)),d=a.n(m),h=a(3),b=a(28),f=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={uesrInfo:null,inputValue:"3d029f55-d68b-4e46-8e78-69149b95cabe"},a.componentDidMount=function(){var e=a.state.inputValue;localStorage.getItem("token")&&d.a.post("https://www.vue-js.com/api/v1/accesstoken",{accesstoken:e}).then((function(e){a.setState({uesrInfo:e.data,inputValue:""}),localStorage.getItem("lastname"),localStorage.setItem("id",e.data.id)}))},a.text=function(e){a.setState({inputValue:e.target.value})},a.Login=function(){var e=a.state.inputValue;"3d029f55-d68b-4e46-8e78-69149b95cabe"===e.trim()?d.a.post("https://www.vue-js.com/api/v1/accesstoken",{accesstoken:e}).then((function(e){a.setState({uesrInfo:e.data,inputValue:""}),localStorage.setItem("token","3d029f55-d68b-4e46-8e78-69149b95cabe"),localStorage.setItem("lastname",e.data.loginname),localStorage.setItem("id",e.data.id),a.props.history.push("/")})):alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801")},a.Exit=function(){console.log(a.props.history.push("/")),a.setState({uesrInfo:!1,inputValue:"3d029f55-d68b-4e46-8e78-69149b95cabe"}),localStorage.removeItem("token","3d029f55-d68b-4e46-8e78-69149b95cabe"),localStorage.removeItem("lastname"),localStorage.removeItem("id"),a.props.history.push("/")},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.uesrInfo,a=e.inputValue;return c.a.createElement("header",null,c.a.createElement("div",{className:"wrap"},c.a.createElement("div",{className:"top"},c.a.createElement(h.b,{to:"/"},c.a.createElement("img",{className:"logo",src:"https://www.vue-js.com/public/images/vue.png",alt:""})),c.a.createElement(h.b,{to:"/"},c.a.createElement("span",{className:"vue"},"Vue.js")),c.a.createElement("input",{type:"text",value:a,onChange:this.text})),t?c.a.createElement("div",{className:"user"}," ",c.a.createElement(h.b,{to:"/user/".concat(t.loginname)},c.a.createElement("img",{style:{width:"40px",borderRadius:"50%",padding:"5px 5px"},className:"logo",src:t.avatar_url,alt:""})),c.a.createElement("span",{className:"name"},t.loginname),c.a.createElement(h.b,{to:"/"},c.a.createElement("span",{className:"btn",onClick:this.Exit},"\u9000\u51fa"))):c.a.createElement("div",null,c.a.createElement(h.b,{to:"/"},c.a.createElement("span",{className:"btn",onClick:this.Login},"\u767b\u5f55")))))}}]),t}(n.Component),v=Object(b.f)(f),g=(a(152),a(227)),E=a(39),w=a.n(E);a(89),a(154);w.a.locale("zh-cn");var y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={topics:[],page:1},a.NewUp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";d.a.get("https://www.vue-js.com/api/v1/topics?tab=".concat(e,"&page=").concat(t,"\n        ")).then((function(e){a.setState({topics:e.data.data})}))},a.componentDidMount=function(){var e=a.props.location.search;console.log(e);var t=e.includes("page")?Number(a.props.location.search.match(/[0-9]{1,2}/)):1,n=a.fromLocationGetType();a.NewUp(n,t),a.setState({page:t})},a.fromLocationGetType=function(){var e=a.props.location.search;return""===e||e.includes("all")?"all":e.includes("good")?"good":e.includes("weex")?"weex":e.includes("share")?"share":e.includes("job")?"job":"ask"},a.changepage=function(e){var t=a.fromLocationGetType();a.NewUp(t,e),a.props.history.push("?tab=".concat(t,"&page=").concat(e)),a.setState({page:e})},a.componentDidUpdate=function(e){var t=a.props.location.search,n=a.fromLocationGetType();e.location.search!==t&&(a.setState({topics:[]}),t.includes("page")?a.NewUp(n,a.state.page):(a.setState({page:1}),a.NewUp(n,1)))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.page,t=this.props.location.search,a=[{tab:"all",allnumber:1015},{tab:"good",allnumber:15},{tab:"weex",allnumber:3},{tab:"share",allnumber:350},{tab:"ask",allnumber:623},{tab:"job",allnumber:39}].find((function(e){return""===t?"all"===e.tab:t.indexOf(e.tab)>-1})).allnumber,n=this.state.topics;console.log(this.props.location.search);var o=this.props.location.search.includes("all")||this.props.location.search.includes("good")||""===this.props.location.search;return console.log(o),c.a.createElement("div",{className:"wrap"},c.a.createElement("ul",{className:"list"},c.a.createElement("li",null,c.a.createElement(h.c,{className:""===t?"active":"",isActive:function(){return t.includes("?tab=all")},to:"/?tab=all"},"\u5168\u90e8")),c.a.createElement("li",null,c.a.createElement(h.c,{isActive:function(){return t.includes("?tab=good")},to:"/?tab=good"},"\u7cbe\u534e")),c.a.createElement("li",null,c.a.createElement(h.c,{isActive:function(){return t.includes("?tab=weex")},to:"/?tab=weex"},"weex")),c.a.createElement("li",null,c.a.createElement(h.c,{isActive:function(){return t.includes("?tab=share")},to:"/?tab=share"},"\u5206\u4eab")),c.a.createElement("li",null,c.a.createElement(h.c,{isActive:function(){return t.includes("?tab=ask")},to:"/?tab=ask"},"\u95ee\u7b54")),c.a.createElement("li",null," ",c.a.createElement(h.c,{isActive:function(){return t.includes("?tab=job")},to:"/?tab=job"},"\u62db\u8058"))),n?c.a.createElement("div",{className:"topic"},c.a.createElement("ul",{className:"listOne"},n.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(h.b,{style:{width:"50px",display:"inline-block"},to:"/user/:username"},c.a.createElement("img",{style:{width:"30px",borderRadius:"3px",marginRight:"10px"},className:"people-logo",src:e.author.avatar_url,alt:""})),c.a.createElement("p",{className:"all"},c.a.createElement("span",{className:"int"},e.reply_count),c.a.createElement("span",{className:"intone"},"/",e.visit_count)),c.a.createElement("span",{className:"top",style:e.top||e.good?{backgroundColor:"#369219",color:"#fff"}:{backgroundColor:"#e5e5e5",color:"#999"}},o?c.a.createElement("span",{className:"yeah"},e.top?"\u7f6e\u9876":e.good?"\u7cbe\u534e":"share"===e.tab?"\u5206\u4eab":"ask"===e.tab?"\u95ee\u7b54":"job"===e.tab?"\u62db\u8058":"weex"):""),c.a.createElement(h.b,{className:"dis",to:"/topic/".concat(e.id)},e.title),c.a.createElement("hr",null))})))):c.a.createElement("div",null,"\u7a0d\u7b49\u4e00\u4e0b\u6570\u636e\u9a6c\u4e0a\u5c31\u6765"),c.a.createElement(g.a,{onChange:this.changepage,total:a,current:e,defaultPageSize:20}))}}]),t}(n.Component),j=a(79),x=(a(223),a(121)),k=a.n(x);w.a.locale("zh-cn");var N=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={topic:null,replies:[],comment:"",textAreacomment:""},a.componentDidMount=function(){a.state.topic;var e=a.props.match.params.id;a.initEditor(),d.a.get("https://www.vue-js.com/api/v1/topic/".concat(e)).then((function(e){var t=e.data.data;t.replies.forEach((function(e){return e.textArea=!1})),a.setState({topic:t,replies:e.data.data.replies})}))},a.setComment=function(e){a.setState({comment:e})},a.replyReply=function(e){var t=a.props.match.params.id,n=a.state.textAreacomment;n.trim()&&d.a.post("https://www.vue-js.com/api/v1/topic/".concat(t,"/replies"),{accesstoken:"3d029f55-d68b-4e46-8e78-69149b95cabe",content:n,reply_id:e}).then((function(e){d.a.get("https://www.vue-js.com/api/v1/topic/".concat(t)).then((function(e){a.setState({topic:e.data.data,replies:e.data.data.replies})}))}))},a.reply=function(e,t){var n=a.state.topic,c=Object(j.a)({},n);n.replies.forEach((function(e){e.id===t?e.textArea=!e.textArea:e.textArea=!1})),a.setState({topic:c,textAreacomment:"@".concat(e,"  ")})},a.addComment=function(){var e=a.state.comment,t=a.props.match.params.id;e.trim()?d.a.post("https://www.vue-js.com/api/v1/topic/".concat(t,"/replies"),{accesstoken:"3d029f55-d68b-4e46-8e78-69149b95cabe",content:e}).then((function(e){console.log(e.data);var t=a.props.match.params.id;d.a.get("https://www.vue-js.com/api/v1/topic/".concat(t)).then((function(e){a.setState({topic:e.data.data,replies:e.data.data.replies})}))})):alert("\u8bf7\u8f93\u5165\u6709\u6548\u5b57\u7b26")},a.handle=function(e){a.setState({comment:e.target.value})},a.zan=function(e){var t=localStorage.getItem("token"),n=localStorage.getItem("id"),c=Object(j.a)({},a.state.topic);t&&d.a.post("https://www.vue-js.com/api/v1/reply/".concat(e,"/ups"),{accesstoken:"3d029f55-d68b-4e46-8e78-69149b95cabe"}).then((function(t){console.log(t.data),"up"===t.data.action?(c.replies.find((function(t){return t.id===e})).ups.push(n),console.log(c.replies.find((function(t){return t.id===e})).ups)):c.replies.find((function(t){return t.id===e})).ups=c.replies.find((function(t){return t.id===e})).ups.filter((function(e){return"5e86e2a97d2d480729ae771c"!==e})),a.setState({topic:c})}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"initEditor",value:function(){var e=this,t=this.refs.editorElem,a=new k.a(t);this.editor=a,a.customConfig.menus=["head","bold","italic","underline"],a.customConfig.onchange=function(t){e.setComment(t)},a.create()}},{key:"render",value:function(){var e=this,t=this.state,a=t.topic,n=t.replies,o=(t.comment,t.textAreacomment),l=localStorage.getItem("lastname");return c.a.createElement("div",{className:"big-wrap"},a?c.a.createElement("div",null,c.a.createElement("h2",null,a.title),c.a.createElement("div",null,c.a.createElement("span",null,"\u2022 \u53d1\u5e03\u4e8e ",w()(a.create_at).fromNow())," ",c.a.createElement("span",null,"\u2022 \u4f5c\u8005",c.a.createElement(h.b,{className:"author",to:"/user/:username"},a.author.loginname))," \u2022",a.visit_count,"\u6b21\u6d4f\u89c8",c.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.content}}))):"\u8bf7\u7a0d\u7b49",c.a.createElement("div",{className:"comment-box"},n?c.a.createElement("div",null,n.map((function(t){return c.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:"10px",justifyContent:"space-between",borderTop:"1px solid #DCDCDC"},key:t.id},c.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",width:"800px"}},c.a.createElement("img",{style:{width:"30px",height:"30px",marginRight:"6px"},src:t.author.avatar_url,alt:""}),c.a.createElement("div",null,t.author.loginname,c.a.createElement("br",null),c.a.createElement("div",{style:{display:"inline-block"},dangerouslySetInnerHTML:{__html:t.content}}))),c.a.createElement("div",{className:"zan"},c.a.createElement("button",{onClick:function(){e.zan(t.id)},style:{color:t.ups.includes("5e86e2a97d2d480729ae771c")?"red":"black"}},"\u70b9\u8d5e"),c.a.createElement("span",null,t.ups.length),l?c.a.createElement("button",{onClick:function(){e.reply(t.author.loginname,t.id)}},"\u56de\u590d"):"",c.a.createElement("div",{style:{marginLeft:"-850px",marginTop:"30px"}},t.textArea?c.a.createElement("div",null,c.a.createElement("textarea",{rows:"8",cols:"135",className:"reply",onChange:function(t){return e.setState({textAreacomment:t.target.value})},style:{display:"block"},value:o}),c.a.createElement("button",{onClick:function(){e.replyReply(t.id)}},"\u56de\u590d")):"")))}))):"\u7b49\u4e00\u4e0b"),c.a.createElement("h3",null,"\u6dfb\u52a0\u56de\u590d"),c.a.createElement("div",{ref:"editorElem",id:"#div1"}),c.a.createElement("button",{onClick:this.addComment},"\u56de\u590d"))}}]),t}(n.Component),S=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props.match.params.username),c.a.createElement("div",null,c.a.createElement("div",{className:"top"},c.a.createElement("p",null,"\u4e2a\u4eba\u4e2d\u5fc3")))}}]),t}(n.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(b.c,null,c.a.createElement(b.a,{exact:!0,path:"/",component:y}),c.a.createElement(b.a,{path:"/topic/:id",component:N}),c.a.createElement(b.a,{path:"/user/:username",component:S}))}}]),t}(n.Component);a(224);var C=function(){return c.a.createElement(h.a,null,c.a.createElement(v,null),c.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.fdd22bb8.chunk.js.map